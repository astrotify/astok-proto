syntax = "proto3";

package order;

import "modules/common.proto";

option go_package = "go-proto/modules/order";

// === DATA MODELS ===

message Order {
  int32 id = 1;
  int32 user_id = 2;
  string status = 3;
  double total_amount = 4;
  repeated OrderProduct products = 5;
  string created_at = 6;  // ISO 8601 UTC format
  string updated_at = 7;  // ISO 8601 UTC format
}

message OrderProduct {
  int32 id = 1;
  int32 product_id = 2;
  int32 quantity = 3;
  double price = 4;
}

// === REQUEST MESSAGES ===

message CreateOrderRequest {
  int32 user_id = 1;
  double total_amount = 2;
  repeated OrderProduct products = 3;
}

message GetOrderRequest {
  int32 id = 1;
}

message GetOrdersByUserRequest {
  int32 user_id = 1;
  int32 limit = 2;
  int32 page = 3;
}

message UpdateOrderStatusRequest {
  int32 id = 1;
  string status = 2;
}

// === RESPONSE MESSAGES ===

message CreateOrderResponse {
  bool success = 1;
  string message = 2;
  string code = 3;
  Order data = 4;
}

message GetOrderResponse {
  bool success = 1;
  string message = 2;
  string code = 3;
  Order data = 4;
}

message GetOrdersByUserResponse {
  bool success = 1;
  string message = 2;
  string code = 3;
  message Data {
    repeated Order orders = 1;
    common.Pagination pagination = 2;
  }
  Data data = 4;
}

message UpdateOrderStatusResponse {
  bool success = 1;
  string message = 2;
  string code = 3;
  Order data = 4;
}